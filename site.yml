---

- hosts: all
  become: true
  pre_tasks:
    - name: Update apt cache
      apt:
        update_cache: true
        cache_valid_time: 600
      changed_when: false
      when: ansible_os_family == 'Debian'
    - name: Create common config directory
      file:
        path: "{{ common_directory_config }}"
        state: directory
        owner: "{{ common_user }}"
        group: "{{ common_group }}"
  roles:
    - calvinbui.ansible_nfs_client
    - calvinbui.ansible_docker
    - calvinbui.ansible_pip
    - calvinbui.ansible_docker_network
    - calvinbui.ansible_htpasswd
    - calvinbui.ansible_traefik
    - calvinbui.ansible_nzbget_docker
    - calvinbui.ansible_qbittorrent_docker
    - calvinbui.ansible_sonarr_docker
    - calvinbui.ansible_couchpotato_docker
    - calvinbui.ansible_nzbhydra_docker
    - calvinbui.ansible_lazylibrarian_docker
    - calvinbui.ansible_jdownloader_docker
    - calvinbui.ansible_organizr_docker
    - calvinbui.ansible_portainer
    - calvinbui.ansible_watchtower
    - calvinbui.ansible_datadog
